#!/usr/bin/env node

const git = require('../lib/git');
const handlers = require('../lib/handlers');

let fileList;

try {
  // Get the repository path
  fileList = git.getStagedFiles();
} catch (e) {
  if (e instanceof handlers.NoStagedFileError) {
    console.log('No staged files to commit, exiting...');
    process.exit(0);
  } else {
    // If the error comes from git, stop the script and exit with error status code
    console.error('Something went wrong while retrieving your git information, exiting...');
    process.exit(1);
  }
}

require('../src/npm-git-hooks').run('pre-commit', fileList);
